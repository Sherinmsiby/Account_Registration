<form [formGroup]="registrationForm" (ngSubmit)="onSubmit()">
  <div class="row">
    <div class=" col-sm-6 form-group">
      <label class="control-label" [ngClass]="{'required': registrationForm.get('accountType').pristine}"
        for="accountType">Account Type</label>
      <select class="form-control" formControlName="accountType">
        <option *ngFor="let accountType of accountTypes" [value]="accountType">{{accountType}}</option>
      </select>
    </div>
    <div class="col-sm-6  form-group">
      <label class="control-label" for="individualCount"
        [ngClass]="{'required': registrationForm.get('individualCount').pristine}">Number of Individuals</label>
      <select class="form-control" formControlName="individualCount" (change)="updateIndividualCount($event.target.value)">
        <option *ngFor="let individualCount of individualsCount" [value]="individualCount">{{individualCount}}</option>
      </select>
    </div>
  </div>

  <input type="date" formControlName="effectiveEndDate" style="display:none">
   <span *ngIf="registrationForm.get('effectiveEndDate').errors?.inValidAge">field is
      required</span> 

      <div *ngIf="displayAssociatedIndividuals()" >
          <div *ngFor="let detail of details; let i = index;">
              <IPS-associated-individuals [form]="registrationForm" [selectedAccountType]="registrationForm.get('accountType').value"
                 [detail]="detail" [detailIndex]="i"  *ngIf="i<selectedAssociateCount"></IPS-associated-individuals>
          </div>
        </div>
  <div *ngIf="displayPersonalAccountDetails()"> 
      <IPS-personal-account-details [personAccountForm]="registrationForm"></IPS-personal-account-details>
    </div>
    <div *ngIf="displayCorporateAccountDetails()"> 
      <IPS-corporate-accounts-details [completeData]="details"  [corporateAccountForm]="registrationForm"></IPS-corporate-accounts-details>
      </div>

  <span class="help-block" *ngIf="!registrationForm.valid && registrationForm.touched">
    please enter valid data
  </span>

  <button class="btn btn-primary" type="submit">Submit</button>
</form>

{{registrationForm.value |json}}
{{registrationForm.valid}}